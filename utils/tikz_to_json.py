import re
import json

# TikZ input as a multiline string
tikz_data = """
                                                   \begin{tikzpicture}                                                                                                                                                                                                                          \begin{axis}[                                                                                                                                                                                                                                    axis lines = left,                                                                                                                                                                                                                           xlabel = Epochs,                                                                                                                                                                                                                             ylabel = Loss,                                                                                                                                                                                                                           ]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \addplot [                                                                                                                                                                                                                                       color=blue,                                                                                                                                                                                                                                  ]                                                                                                                                                                                                                                            coordinates {                                                                                                                                                                                                                            (1, 0.51842)(2, 0.2031)(3, 0.20263)(4, 0.20004)(5, 0.18332)(6, 0.17974)(7, 0.17937)(8, 0.18043)(9, 0.17754)(10, 0.16941)(11, 0.17307)(12, 0.17248)(13, 0.171)(14, 0.16985)(15, 0.17332)(16, 0.17041)(17, 0.16441)(18, 0.16846)(19, 0.16657)(20, 0.17123)(21, 0.16758)(22, 0.16538)(23, 0.16076)(24, 0.16019)(25, 0.16611)(26, 0.16325)(27, 0.16409)(28, 0.15955)(29, 0.15992)(30, 0.16414)(31, 0.15839)(32, 0.15882)(33, 0.15985)(34, 0.15964)(35, 0.15704)(36, 0.16155)(37, 0.15977)(38, 0.15558)(39, 0.15593)(40, 0.15747)(41, 0.15732)(42, 0.15447)(43, 0.15225)(44, 0.15771)(45, 0.15501)(46, 0.15468)(47, 0.15322)(48, 0.15552)(49, 0.15488)(50, 0.15827)(51, 0.15658)(52, 0.15502)(53, 0.15235)(54, 0.15392)(55, 0.15392)(56, 0.15501)(57, 0.15265)(58, 0.15494)(59, 0.15269)(60, 0.15348)(61, 0.15269)(62, 0.15262)(63, 0.1544)(64, 0.15207)(65, 0.15137)(66, 0.15035)(67, 0.15378)(68, 0.15334)(69, 0.1526)(70, 0.14851)(71, 0.15064)(72, 0.15123)(73, 0.14715)(74, 0.14974)(75, 0.15037)(76, 0.1479)(77, 0.15055)(78, 0.14593)(79, 0.1523)(80, 0.14901)(81, 0.14772)(82, 0.14868)(83, 0.14632)(84, 0.14607)(85, 0.14767)(86, 0.14823)(87, 0.14583)(88, 0.14687)(89, 0.1472)(90, 0.14258)(91, 0.08847)(92, 0.08927)(93, 0.08797)(94, 0.08696)(95, 0.08697)(96, 0.08733)(97, 0.08618)(98, 0.08727)(99, 0.0865)(100, 0.08699)                                                                                                                                               };                                                                                                                                                                                                                                       \addlegendentry{Training}                                                                                                                                                                                                                    \addplot [                                                                                                                                                                                                                                       color=red,                                                                                                                                                                                                                                   ]                                                                                                                                                                                                                                            coordinates {                                                                                                                                                                                                                            (1, 0.13131)(2, 0.12626)(3, 0.17191)(4, 0.99515)(5, 0.11277)(6, 0.10958)(7, 0.10229)(8, 0.1207)(9, 0.10076)(10, 0.0951)(11, 0.10095)(12, 0.09437)(13, 0.09584)(14, 0.09684)(15, 0.09322)(16, 0.11247)(17, 0.1)(18, 0.09772)(19, 0.09851)(20, 0.09299)(21, 0.09765)(22, 0.09677)(23, 0.09237)(24, 0.09596)(25, 0.09823)(26, 0.09417)(27, 0.09643)(28, 0.09339)(29, 0.08678)(30, 0.09305)(31, 0.09488)(32, 0.08932)(33, 0.09054)(34, 0.09354)(35, 0.09095)(36, 0.08637)(37, 0.09511)(38, 0.08964)(39, 0.0926)(40, 0.09114)(41, 0.08938)(42, 0.0964)(43, 0.09008)(44, 0.08922)(45, 0.08946)(46, 0.09099)(47, 0.0889)(48, 0.09203)(49, 0.08932)(50, 0.09183)(51, 0.08668)(52, 0.08633)(53, 0.08847)(54, 0.08693)(55, 0.08934)(56, 0.09041)(57, 0.08738)(58, 0.08765)(59, 0.0865)(60, 0.08692)(61, 0.08651)(62, 0.08626)(63, 0.08605)(64, 0.08724)(65, 0.08555)(66, 0.08643)(67, 0.08675)(68, 0.08597)(69, 0.08805)(70, 0.08804)(71, 0.0883)(72, 0.08468)(73, 0.08672)(74, 0.08643)(75, 0.08727)(76, 0.08502)(77, 0.08631)(78, 0.0861)(79, 0.08669)(80, 0.08703)(81, 0.08748)(82, 0.0869)(83, 0.0864)(84, 0.0867)(85, 0.08608)(86, 0.08398)(87, 0.08519)(88, 0.08535)(89, 0.0853)(90, 0.08496)(91, 0.08557)(92, 0.08484)(93, 0.08469)(94, 0.08556)(95, 0.08543)(96, 0.08583)(97, 0.08489)(98, 0.08508)(99, 0.08484)(100, 0.08532)                                                                                                                                                      };                                                                                                                                                                                                                                       \addlegendentry{Validation}                                                                                                                                                                                                                                                                                                                                                                                                                                                               \end{axis}                                                                                                                                                                                                                                   \end{tikzpicture}
"""

# Extract all coordinate blocks
coordinate_blocks = re.findall(r'coordinates\s*{([^}]*)}', tikz_data, re.DOTALL)

def parse_coordinates(block):
    # Find all (x, y) pairs and convert them to dicts
    return [
        {'x': int(x), 'y': float(y)}
        for x, y in re.findall(r'\((\d+),\s*([0-9.]+)\)', block)
    ]

datasets = []
colors = ['#42A5F5', '#EF5350']  # blue, red
labels = ['Training', 'Validation']

# Build the JS object
for i, block in enumerate(coordinate_blocks):
    data = parse_coordinates(block)
    datasets.append({
        'label': labels[i],
        'data': data,
        'fill': False,
        'borderColor': colors[i],
        'tension': 0.3,
        'showLine': True
    })

chart_data = {
    'datasets': datasets
}

# Pretty print as JavaScript-style JSON
print('this.chartData =', json.dumps(chart_data, indent=2))
