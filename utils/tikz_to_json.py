import re
import json

# TikZ input as a multiline string
tikz_data = """
\begin{tikzpicture}
\begin{axis}[
    axis lines = left,
    xlabel = Epochs,
    ylabel = Loss,
]

\addplot [
    color=blue,
    ]
    coordinates {
(1, 2.5014)(2, 0.28751)(3, 0.27882)(4, 0.26422)(5, 0.28806)(6, 0.31598)(7, 0.28094)(8, 0.27277)(9, 0.25318)(10, 0.25016)(11, 0.24506)(12, 0.24686)(13, 0.2468)(14, 0.24474)(15, 0.24089)(16, 0.2388)(17, 0.25063)(18, 0.23769)(19, 0.22635)(20, 0.22888)(21, 0.22997)(22, 0.24984)(23, 0.23557)(24, 0.23498)(25, 0.25972)(26, 0.24302)(27, 0.22771)(28, 0.23602)(29, 0.23075)(30, 0.23115)(31, 0.22959)(32, 0.23686)(33, 0.23895)(34, 0.25693)(35, 0.24289)(36, 0.22047)(37, 0.23084)(38, 0.22844)(39, 0.23078)(40, 0.21765)(41, 0.22099)(42, 0.22534)(43, 0.23386)(44, 0.21936)(45, 0.22938)(46, 0.22305)(47, 0.22001)(48, 0.22644)(49, 0.21629)(50, 0.22759)(51, 0.23424)(52, 0.21589)(53, 0.21539)(54, 0.22412)(55, 0.22446)(56, 0.22768)(57, 0.23115)(58, 0.21958)(59, 0.22209)(60, 0.22029)(61, 0.23469)(62, 0.21966)(63, 0.21939)(64, 0.22488)(65, 0.22467)(66, 0.21459)(67, 0.22156)(68, 0.21527)(69, 0.22991)(70, 0.2205)(71, 0.21975)(72, 0.2162)(73, 0.21711)(74, 0.21176)(75, 0.2133)(76, 0.20634)(77, 0.2156)(78, 0.21534)(79, 0.21048)(80, 0.21326)(81, 0.21676)(82, 0.22014)(83, 0.2233)(84, 0.2151)(85, 0.21589)(86, 0.22098)(87, 0.21815)(88, 0.21249)(89, 0.22093)(90, 0.22155)(91, 0.15637)(92, 0.13121)(93, 0.12719)(94, 0.13004)(95, 0.13023)(96, 0.12572)(97, 0.12803)(98, 0.12769)(99, 0.12802)(100, 0.12779)
    };
\addlegendentry{Training}
\addplot [
    color=red,
    ]
    coordinates {
(1, 4.0859)(2, 0.18515)(3, 0.25824)(4, 0.30597)(5, 0.41636)(6, 1.0506)(7, 0.44465)(8, 0.86617)(9, 0.13416)(10, 0.13545)(11, 0.14359)(12, 0.12173)(13, 0.12534)(14, 0.13743)(15, 0.15381)(16, 0.11952)(17, 0.13752)(18, 0.11695)(19, 0.12059)(20, 0.12717)(21, 0.12198)(22, 0.14294)(23, 0.12362)(24, 0.15559)(25, 0.13351)(26, 0.13064)(27, 0.13108)(28, 0.31029)(29, 0.13562)(30, 0.12031)(31, 0.12034)(32, 0.13053)(33, 0.12889)(34, 0.22404)(35, 0.18661)(36, 0.12441)(37, 0.12165)(38, 0.12732)(39, 0.12472)(40, 0.13893)(41, 0.13518)(42, 0.1112)(43, 0.11932)(44, 0.11601)(45, 0.11488)(46, 0.11768)(47, 0.11474)(48, 0.11893)(49, 0.12327)(50, 0.12031)(51, 0.12081)(52, 0.11275)(53, 0.12603)(54, 0.11072)(55, 0.11674)(56, 0.11647)(57, 0.12532)(58, 0.1232)(59, 0.12499)(60, 0.11889)(61, 0.1249)(62, 0.12386)(63, 0.1184)(64, 0.11682)(65, 0.11953)(66, 0.11952)(67, 0.12707)(68, 0.11391)(69, 0.11112)(70, 0.11789)(71, 0.11486)(72, 0.1167)(73, 0.12423)(74, 0.12522)(75, 0.11616)(76, 0.10822)(77, 0.12775)(78, 0.13553)(79, 0.11666)(80, 0.12331)(81, 0.1181)(82, 0.11447)(83, 0.11565)(84, 0.1126)(85, 0.11576)(86, 0.11939)(87, 0.11999)(88, 0.12133)(89, 0.11706)(90, 0.11363)(91, 0.12781)(92, 0.12119)(93, 0.1186)(94, 0.1173)(95, 0.12098)(96, 0.11714)(97, 0.11686)(98, 0.11662)(99, 0.1171)(100, 0.11773)
    };
\addlegendentry{Validation}

\end{axis}
\end{tikzpicture}
"""

# Extract all coordinate blocks
coordinate_blocks = re.findall(r'coordinates\s*{([^}]*)}', tikz_data, re.DOTALL)

def parse_coordinates(block):
    # Find all (x, y) pairs and convert them to dicts
    return [
        {'x': int(x), 'y': float(y)}
        for x, y in re.findall(r'\((\d+),\s*([0-9.]+)\)', block)
    ]

datasets = []
colors = ['#42A5F5', '#EF5350']  # blue, red
labels = ['Training', 'Validation']

# Build the JS object
for i, block in enumerate(coordinate_blocks):
    data = parse_coordinates(block)
    datasets.append({
        'label': labels[i],
        'data': data,
        'fill': False,
        'borderColor': colors[i],
        'tension': 0.3,
        'showLine': True
    })

chart_data = {
    'datasets': datasets
}

# Pretty print as JavaScript-style JSON
print('this.chartData =', json.dumps(chart_data, indent=2))
